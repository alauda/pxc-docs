---
weight: 15
i18n:
  title:
    en: Установка
title: Установка
sourceSHA: edae44aededc6fbe8ed7707288e660d862adff75f8d61677184e3e9627d86ce8
---

# Развертывание

## Установка плагина Essentials для служб данных платформы Alauda Container

::: tip Дополнительно к развертыванию
Плагин является основным компонентом представления служб данных; его можно опустить, если веб-консоль не требуется.
:::

### Предварительные требования

1. Скачайте установочный пакет Essentials для служб данных платформы Alauda Container, который соответствует вашей платформе.
2. Используйте возможность платформы по отображению приложений, чтобы перечислить Essentials для служб данных платформы Alauda Container в ***глобальном кластере***.

### Процедура

<Tabs>
  <Tab label="Веб-консоль">
    1. В левом навигационном меню перейдите в раздел **Marketplace** > **Cluster Plugins**.
    2. Выберите **глобальный** кластер.
    3. Нажмите кнопку операции рядом с плагином **Essentials для служб данных платформы Alauda Container** > **Развернуть**.
  </Tab>
</Tabs>

## Установка плагина RDS Framework для служб данных платформы Alauda Container

::: tip Дополнительно к развертыванию
Плагин является основным компонентом представления служб данных; его можно опустить, если графические службы не требуются.
:::

### Предварительные требования

1. Скачайте установочный пакет RDS Framework для служб данных платформы Alauda Container, который соответствует вашей платформе.
2. Используйте возможность платформы по отображению приложений, чтобы перечислить RDS Framework для служб данных платформы Alauda Container в любом кластере, где вы хотите использовать представление служб данных.

### Процедура

<Tabs>
  <Tab label="Веб-консоль">
    1. Войдите в платформу и перейдите на страницу **Administrator**.
    2. В левом навигационном меню выберите **Marketplace** -> **Operator**, чтобы перейти на страницу **OperatorHub**.
    3. Найдите **RDS Framework для служб данных платформы Alauda Container**, нажмите **Развернуть**, чтобы перейти на страницу развертывания.

    Параметры конфигурации:

    | **Параметр**         | **Рекомендуемая конфигурация**                                                                                                                |
    | :------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------- |
    | **Стратегия обновления** | **Ручная**: Когда в Operator Hub появляется новая версия, требуется ручное подтверждение для обновления оператора до последней версии.    |
    | **Режим развертывания**  | **Кластер**: Все пространства имен под кластером используют одного оператора для создания и управления экземплярами, что позволяет снизить потребление ресурсов. |
    | **Канал**           | Канал по умолчанию - **устойчивый**.                                                                                                          |
    | **Пространство имен** | Выберите **Рекомендуемое пространство имен**: автоматически создается, если его нет.                                                           |

    4. На странице **Deploy Operator** выберите **Default Configuration**, затем нажмите **Deploy**, чтобы завершить развертывание **RDS Framework для служб данных платформы Alauda Container**.
  </Tab>
</Tabs>

## Установка аналитики запросов платформы Alauda для служб данных

::: tip Дополнительная установка
Плагин служит основным компонентом для аналитических возможностей запросов. Его не обязательно устанавливать, если мониторинг и анализ производительности запросов не требуются.
:::

### Предварительные требования

1. Скачайте установочный пакет аналитики запросов платформы Alauda для служб данных, который соответствует платформе.
2. Используйте возможность платформы по публикации приложений, чтобы опубликовать аналитику запросов платформы Alauda для служб данных в любом кластере, где требуются графические возможности служб приложений.

### Процедура

<Tabs>
  <Tab label="Веб-консоль">
    1. Войдите в платформу и перейдите на страницу **Управление платформой**.
    2. В левом навигационном меню выберите **Marketplace** -> **Operator Hub**, чтобы перейти на страницу **Operator Hub**.
    3. Найдите **Аналитика запросов платформы Alauda для служб данных**, нажмите **Установить**, чтобы перейти на страницу установки.

    Параметры конфигурации:

    | **Параметр**           | **Рекомендуемая конфигурация**                                                                                                                  |
    | :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------ |
    | **Канал**              | Канал по умолчанию - **устойчивый**.                                                                                                             |
    | **Версия**             | Выберите желаемую версию для установки.                                                                                                          |
    | **Режим установки**     | **Кластер**: Все пространства имен под кластером используют одного оператора для создания и управления экземплярами, что позволяет снизить потребление ресурсов. |
    | **Место установки**     | Выберите **Рекомендуемое**: если его нет, оно будет создано автоматически.                                                                        |
    | **Стратегия обновления** | **Ручная**: Когда новая версия доступна в Operator Hub, требуется ручное подтверждение для обновления оператора до последней версии.         |

    4. На странице **Install Operator** выберите **Default Configuration**, затем нажмите **Install**, чтобы завершить установку **аналитики запросов платформы Alauda для служб данных**.
  </Tab>
</Tabs>

:::warning Конфигурация хранилища
Плагин аналитики запросов по умолчанию использует хранилище hostPath по адресу `/cpaas/ck`. Если этот путь не существует (обычно изменен на `/var/cpaas`), выполните следующие шаги:

1. Измените ресурс QueryAnalyticsInstaller (`qai`)
2. Настройте `slowSQL.storageClassName` с классом хранилища вашей системы
3. Удалите существующие поды и PVC, чтобы изменения вступили в силу

Пример конфигурации:

```yaml
kind: QueryAnalyticsInstaller
metadata:
  name: qai
  resourceVersion: "4145608"
spec:
  slowSQL:
    GRPCPort: "9922"
    HTTPPort: "9911"
    clickhouse:
      clickhouseImage: 192.168.128.24/middleware/clickhouse-server:v24.8.3.59-64c1f43f
      resources:
        limits:
          cpu: "1"
          memory: 2Gi
        requests:
          cpu: "1"
          memory: 2Gi
    dataCleanCorn: 0 0 18 * * ?
    dataKeepDays: "15"
    name: pxc-ck
    namespace: cpaas-system
    server:
      image: 192.168.128.24/middleware/slowsql:2926e899
    storageClassName: mid-topolvmsc
```

:::

## Установка плагина Alauda Database Service для MySQL-PXC

### Предварительные требования

1. Скачайте установочный пакет плагина, который соответствует вашей платформе.
2. Используйте возможность платформы по отображению приложений, чтобы перечислить плагин в любом кластере, где вы хотите использовать возможности Alauda Database Service для MySQL-PXC.

### Процедура

<Tabs>
  <Tab label="Веб-консоль">
    1. Войдите в платформу и перейдите на страницу **Administrator**.
    2. В левом навигационном меню выберите **Marketplace** -> **Operator**, чтобы перейти на страницу **Operator Hub**.
    3. Найдите **Служба базы данных Alauda для MySQL-PXC**, нажмите **Развернуть**, чтобы перейти на страницу развертывания.

    Параметры конфигурации:

    | **Параметр**         | **Рекомендуемая конфигурация**                                                                                                                |
    | :------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------- |
    | **Стратегия обновления** | **Ручная**: Когда в Operator Hub появляется новая версия, требуется ручное подтверждение для обновления оператора до последней версии.    |
    | **Режим развертывания**  | **Кластер**: Все пространства имен под кластером используют одного оператора для создания и управления экземплярами, что позволяет снизить потребление ресурсов. |
    | **Канал**           | Канал по умолчанию - **устойчивый**.                                                                                                          |
    | **Пространство имен** | Выберите **Рекомендуемое пространство имен**: автоматически создается, если его нет.                                                           |

    4. На странице **Deploy Operator** выберите **Default Configuration**, затем нажмите **Deploy**, чтобы завершить развертывание.
  </Tab>
</Tabs>
