---
weight: 5
sourceSHA: d34b3aa5036a067e1fc1d8f014ec050b7ff6561e7c14c2e99edee5140da03d3e
---

# Методы доступа

Alauda Database Service для MySQL-PXC предоставляет точки доступа к базе данных для клиентских приложений в различных сценариях. В любом случае кластер доступен через обычные объекты службы Kubernetes, конфигурируемые оператором.

## Процедура

<Tabs>
  <Tab label="CLI">
    1. Получите доступ к экземпляру, используя DNS службы внутри кластера

    ```bash
    mysql -u$username -p$password -h$name.$namespace
    ```

    2. Получите доступ к экземпляру, используя NodePort снаружи кластера

    - Включите NodePort

    ```bash
    kubectl patch mysql -n $namespace $name --type merge -p '
    spec:
      pxc:
        proxysql:
          serviceType: NodePort
    '
    ```

    - Проверьте NodePort

    ```bash
    kubectl get svc -n $namespace $name-proxysql -o jsonpath='{.spec.ports[0].nodePort}'
    ```

    - Получите доступ к экземпляру, используя NodePort

    ```bash
    mysql -u$username -p$password -h$nodeip -P$nodeport
    ```

    3. Получите доступ к экземпляру, используя LoadBalancer снаружи кластера

    - Включите LoadBalancer

    ```bash
    kubectl patch mysql -n $namespace $name --type merge -p '
    spec:
      pxc:
        proxysql:
          serviceType: LoadBalancer
    '
    ```
  </Tab>

  <Tab label="Web Console">
    #### Получение информации об учетной записи

    1. Нажмите **MySQL-PXC** в левой панели навигации.

    2. Раскройте кластер и нажмите на пространство имен.

    3. Нажмите на ***Имя экземпляра***.

    4. На вкладке **Управление пользователями** получите имя пользователя и пароль.

    #### Получение информации о подключении

    ##### Для доступа внутри кластера

    После создания экземпляра информация для **внутреннего доступа** может быть найдена на вкладке **Методы доступа** экземпляра.

    | Параметр                     | Описание                                                                                                                                                                                                                                                                                                                                                                                                    |
    | ----------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | **Внутренний адрес маршрутизации**  | Единая точка доступа к экземпляру изнутри кластера, включая внутреннее маршрутизированное имя, IP-адрес и номер порта. **Примечание**: Внутреннее маршрутизированное имя должно быть преобразовано в [DNS-имя](https://kubernetes.io/zh/docs/concepts/services-networking/dns-pod-service/#pod-dns-config), которое будет `{Internal Routing Name}.{Namespace Name}.svc.cluster.local` для доступа к экземпляру. |
    | **Адрес доступа к узлам MySQL** | Состоит из имен и номеров портов узлов pxc в экземпляре.                                                                                                                                                                                                                                                                                                                                      |

    ##### Для внешнего доступа

    Сначала вам нужно добавить порты TCP для прослушивания LoadBalancer на вкладке **Методы доступа** экземпляра, чтобы принимать запросы на подключение от **внешних** клиентов.

    ##### Процедура

    1. В области **Внешний доступ** нажмите **Добавить порт для прослушивания**.

    2. Выберите LoadBalancer.

    3. Ознакомьтесь со следующими инструкциями для настройки соответствующих параметров.

       | Параметр                  | Описание                                                                                                                                                                                       |
       | -------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
       | **Группа внутреннего маршрутизирования** | Входящий трафик по умолчанию будет распределяться по портам внутреннего маршрутизатора.                                                                                                              |
       | **Устойчивость сессии**    | Если устойчивость сессии основана на **хэш-адресе источника**, запросы доступа с одного и того же IP-адреса всегда будут перенаправляться на обратное обслуживание, соответствующее группе внутреннего маршрутизатора. |

    4. Нажмите **Добавить**.

    5. Получите доступ к экземпляру
       Рекомендуется использовать [Стандартный клиент MySQL](https://downloads.mysql.com/archives/shell/) для доступа к экземпляру MySQL-PXC.

    - Доступ изнутри кластера: на странице сведений об экземпляре нажмите **Консоль терминала** в правом верхнем углу, чтобы подключиться к узлам MySQL. Если вы подключаетесь к узлу внутри этого экземпляра, вы можете опустить параметр `-h`.

      ```
      mysql -h{Internal Routing Name}.{Namespace Name}.svc.cluster.local -u{Username} -p{Password}

      или

      mysql -h{Internal Routing IP Address} -u{Username} -p{Password}
      ```

    - Доступ снаружи кластера

      ```
      mysql -h{LoadBalancer IP} -P{Listener Port} -u{Username} -p{Password}
      ```
  </Tab>
</Tabs>
