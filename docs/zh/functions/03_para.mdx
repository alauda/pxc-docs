---
sourceSHA: 0b4f09457deca3738301668f4c7af0e9a95eb39fb77ed5d0c0b4e1267970bb09
---

# 参数配置

根据业务场景配置合适的 MySQL 参数可使数据库达到最佳性能，更好地支撑业务。MySQL-PXC 实例默认使用 MySQL 和 Percona 官方提供的系统参数。您也可以通过界面便捷地配置这些参数。

平台提供参数模板，以定义一系列您期望的 MySQL 参数。创建实例时，您可以通过参数模板批量修改默认参数，而模板中未涵盖的参数将保留其默认值。在实例正常运行后，您可以更新 MySQL 参数。

更多参数信息，请查阅 [MySQL 官网](https://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html) 和 [Percona 官网](https://docs.percona.com/percona-xtradb-cluster/8.0/) 。

## 注意事项

修改参数配置将逐个重启容器组，可能会导致业务的短暂中断。

## 操作步骤

<Tabs>
  <Tab label="CLI">
    ```bash
    kubectl patch mysql -n <namespace> <name> --type='merge' --patch '
    spec:
      params:
        mysql:
          mysqld:
            max_connections: "1000"
            expire_logs_days: "7"
    '
    ```

    您可以通过修改 CR 中的 spec.params.mysql 来变更参数，相关的参数键与 MySQL 参数一致。如上所示，将 max_connections 设置为 1000，expire_logs_days 设置为 7。
  </Tab>

  <Tab label="Web Console">
    #### 使用推荐模板设置参数

    **提示**：请参考 [参数模板] 来创建参数模板。

    - 平台提供多种规格的参数模板，供集群中任意 MySQL-PXC 实例使用。每种规格的参数模板均配置了系统参数，如 `innodb_flush_log_at_trx_commit = 1` 和 `sync_binlog = 1`，以帮助提高 MySQL 的安全性。

    - 默认应用于 MySQL-PXC 实例的参数模板名为 **hhd-1c2g-pxc-template**。在创建 MySQL-PXC 实例时，您可以根据实际的磁盘介质与实例规格选择对应的参数模板。

    #### 更新参数

    更新实例现有的参数配置后，MySQL 副本将自动按顺序重启，以使更改生效。

    ##### 操作步骤

    1. 在左侧导航栏中，单击 **MySQL-PXC**。

    2. 单击 ***命名空间名称***。

    3. 单击 ***实例名称***。

    4. 在 **参数配置** 页签下，单击 **更新参数**。

    5. 配置预期的参数，包括逐个配置或批量导入。

       **注意**：导入参数时，请确保不包含 MySQL 不支持的参数，否则实例可能无法启动。

    6. 单击 **更新**。

    ##### 相关操作

    如果需要复用其他实例的参数配置，可以在源实例的 **参数配置** 页签下，单击导出参数，并根据参数模板创建自定义模板并批量导入参数。
  </Tab>
</Tabs>
