---
sourceSHA: ef12a7c2c9a01af257508484d6ab8c1c01966f4faa33ee1ab586c5779f563868
---

# 部署

## 安装 Alauda Container Platform Data Services Essentials插件

::: tip 可选部署
该插件是数据服务视图界面的基本组成部分；如果不需要 Web 控制台，可以省略此插件。
:::

### 前提条件

1. 下载与您的平台匹配的 Alauda Container Platform Data Services Essentials安装包。
2. 使用平台的应用列表功能在 ***global cluster*** 中列出 Alauda Container Platform Data Services Essentials。

### 执行步骤

<Tabs>
  <Tab label="Web 控制台">
    1. 在左侧导航栏中，转到 **应用商店管理** > **集群插件**。
    2. 选择 **global** 集群。
    3. 单击 **Alauda Container Platform Data Services Essentials** 插件旁边的操作按钮 > **部署**。
  </Tab>
</Tabs>

## 安装 Alauda Container Platform Data Services RDS Framework插件

::: tip 可选部署
该插件是数据服务视图界面的基本组成部分；如果不需要图形服务，可以省略此插件。
:::

### 前提条件

1. 下载与您的平台匹配的 Alauda Container Platform Data Services RDS Framework安装包。
2. 使用平台的应用列表功能在任何希望使用数据服务视图功能的集群中列出 Alauda Container Platform Data Services RDS Framework。

### 执行步骤

<Tabs>
  <Tab label="Web 控制台">
    1. 登录平台，转到 **Administrator** 页面。
    2. 在左侧导航栏中，选择 **应用商店管理** -> **操作员** 进入 **操作员中心** 页面。
    3. 找到 **Alauda Container Platform Data Services RDS Framework**，单击 **部署**，进入部署页面。

    配置参数：

    | **参数**              | **推荐配置**                                                                                                                          |
    | :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------ |
    | **升级策略**          | **手动**：当操作员中心有新版本时，需要手动确认以将操作员升级到最新版本。                                                             |
    | **部署模式**          | **集群**：集群下的所有命名空间共享一个操作员来创建和管理实例，从而降低资源消耗。                                                      |
    | **通道**              | 默认通道为 **stable**。                                                                                                               |
    | **命名空间**          | 选择 **推荐命名空间**：如果不存在则会自动创建。                                                                                       |

    4. 在 **部署操作员** 页面，选择 **默认配置**，然后单击 **部署** 完成 **Alauda Container Platform Data Services RDS Framework** 的部署。
  </Tab>
</Tabs>

## 安装 Alauda Container Platform Data Services Query Analytics

::: tip 可选安装
插件为查询分析能力的基础组件，如果不需要查询性能监控和分析功能可以不安装。
:::

### 前提条件
1. 下载与平台匹配的 Alauda Container Platform Data Services Query Analytics 安装包。
2. 通过平台应用上架能力，上架至任意希望使用 Alauda Application Services 界面化能力的集群。

### 操作步骤
<Tabs>
<Tab label="Web Console">
    1. 登录平台，进入 **平台管理** 页面。
    2. 左侧导航栏选择 **应用商店管理** -> **Operator Hub**， 进入 **Operator Hub** 页面。
    3. 找到 **Alauda Container Platform Data Services Query Analytics**，点击 **安装**， 进入安装页面。

    配置参数:

    | **参数**   | **推荐配置**                          |
    | :-------------- | :----------------------------------------------------------- |
    | **频道**     | 默认 Channel 为 **stable** 。            |
    | **版本**     | 选择期望安装的版本。                 |
    | **安装模式** | **集群**：集群下所有命名空间共用一个 Operator 对实例进行创建和管理，资源占用更低。 |
    | **安装位置**   | 选择 **推荐**：无则自动创建。 |
    | **升级策略** | **手动**：Operator Hub 有新版本时，需要手动确认升级至 Operator 至最新版本。 |

    4. 在 **安装 Operator** 页面，选择 **默认配置**， 点击 **安装**，完成安装。
</Tab>
</Tabs>

:::warning 存储配置
Query Analytics 插件默认使用主机路径存储 `/cpaas/ck`。如果该路径不存在（通常改为 `/var/cpaas`），请按照以下步骤操作：

1. 编辑 QueryAnalyticsInstaller (`qai`) 资源
2. 配置 `slowSQL.storageClassName` 为您系统的存储类
3. 删除现有的 Pod 和 PVC 以使更改生效

示例配置:
```yaml
kind: QueryAnalyticsInstaller
metadata:
  name: qai
  resourceVersion: "4145608"
spec:
  slowSQL:
    GRPCPort: "9922"
    HTTPPort: "9911"
    clickhouse:
      clickhouseImage: 192.168.128.24/middleware/clickhouse-server:v24.8.3.59-64c1f43f
      resources:
        limits:
          cpu: "1"
          memory: 2Gi
        requests:
          cpu: "1"
          memory: 2Gi
    dataCleanCorn: 0 0 18 * * ?
    dataKeepDays: "15"
    name: pxc-ck
    namespace: cpaas-system
    server:
      image: 192.168.128.24/middleware/slowsql:2926e899
    storageClassName: mid-topolvmsc
```
:::

## 安装 Alauda MySQL-PXC 数据库服务插件

### 前提条件

1. 下载与您的平台匹配的插件安装包。
2. 使用平台的应用列表功能在任何希望使用 Alauda MySQL-PXC 数据库服务功能的集群中列出该插件。

### 执行步骤

<Tabs>
  <Tab label="Web 控制台">
    1. 登录平台，转到 **Administrator** 页面。
    2. 在左侧导航栏中，选择 **应用商店管理** -> **操作员** 进入 **操作员中心** 页面。
    3. 找到 **Alauda MySQL-PXC 数据库服务**，单击 **部署**，进入部署页面。

    配置参数：

    | **参数**              | **推荐配置**                                                                                                                          |
    | :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------ |
    | **升级策略**          | **手动**：当操作员中心有新版本时，需要手动确认以将操作员升级到最新版本。                                                             |
    | **部署模式**          | **集群**：集群下的所有命名空间共享一个操作员来创建和管理实例，从而降低资源消耗。                                                      |
    | **通道**              | 默认通道为 **stable**。                                                                                                               |
    | **命名空间**          | 选择 **推荐命名空间**：如果不存在则会自动创建。                                                                                       |

    4. 在 **部署操作员** 页面，选择 **默认配置**，然后单击 **部署** 完成部署。
  </Tab>
</Tabs>
